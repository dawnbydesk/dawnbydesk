<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GPA & Grade Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=VT323&family=Fredoka+One&display=swap" rel="stylesheet">
  <style>
    table { table-layout: fixed; }
    :root { --matcha:#b4e6c1; --border:#bcbcbc; --pane-bg:#ffffff; --titlebar:#b1dab8; --text-color:#3b4530; --accent:#fae1dc; }
    body { margin:0; padding:10px; background:transparent; font-family:'Fredoka One',sans-serif; }
    .widget-window {       max-width: 400px;
      margin: 0;
      border-radius: 12px;
      background: var(--pane-bg);
      box-shadow: 5px 7px 0 #dccfc2, 0 0 0 4px #e3f5e5;
      overflow: hidden;
      position: relative;
    }   
      .titlebar {
      background:var(--titlebar);
      color:var(--text-color);
      display:flex;
      align-items:center;
      justify-content:flex-start;
      padding:0 14px;
      height:36px;
      font-family:'VT323',monospace;
      font-size:18px;
      border-bottom:2px solid var(--border);
    }
    .titlebar .window-icons { display:flex; gap:6px; margin-left:auto; }
    .titlebar .button {
      width:12px; height:12px; border-radius:4px; background:#ffe5e5; border:1px solid var(--border); display:inline-block; box-shadow:1px 1px 0 rgba(0,0,0,0.2);
    }
    .titlebar .button:nth-child(1) { background:#ffb5b5; }
    .titlebar .button:nth-child(2) { background:#ffe9a8; }
    .titlebar .button:nth-child(3) { background:#b5ffd9; margin-right:0; }
    .body { padding:12px; display:flex; flex-direction:column; gap:8px; }
    table { width:100%; border-collapse:collapse; }
    th, td { padding:6px 4px; text-align:left; font-size:14px; }
    th { font-family:'VT323',monospace; font-size:16px; border-bottom:1px solid var(--border); }
    td input, td select { width:100%; padding:4px 6px; border:1px solid var(--border); border-radius:6px; font-family:'Fredoka One',sans-serif; font-size:14px; outline:none; box-sizing:border-box; }
    .controls { display:flex; gap:8px; justify-content:flex-end; }
    .btn { background:var(--matcha); color:#fff; border:none; border-radius:6px; padding:6px 12px; cursor:pointer; font-size:14px; font-family:'Fredoka One',sans-serif; }
    .btn:hover { background:#a0c5a0; }
    .btn.settings { background:transparent; color:var(--text-color); font-size:18px; padding:6px; }
    .btn.settings:hover { color:var(--accent); }
    .gpa-display { font-family:'VT323',monospace; font-size:20px; color:var(--text-color); text-align:right; margin-top:0; }
    .modal-overlay { display:none; position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.95); align-items:center; justify-content:center; }
    .modal-overlay.active { display:flex; }
    .modal { background:var(--pane-bg); border:2px solid var(--border); border-radius:10px; padding:16px; width:300px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }
    .modal h2 { font-family:'VT323',monospace; font-size:16px; margin-bottom:8px; color:var(--text-color); }
    .modal label { display:block; margin-bottom:6px; font-size:14px; }
    .modal select { width:100%; margin-bottom:12px; }
    .modal-buttons { display:flex; justify-content:flex-end; gap:8px; }
    .modal-btn { padding:6px 12px; font-size:14px; border:none; border-radius:6px; cursor:pointer; font-family:'Fredoka One',sans-serif; }
    .confirm-btn { background:var(--matcha); color:#fff; }
    .cancel-btn { background:var(--accent); color:var(--text-color); }
  </style>
</head>
<body>
  <div class="widget-window">
    <div class="titlebar">
    <span>GPA & Grade Calculator</span>
      <div class="window-icons">
        <span class="button"></span>
        <span class="button"></span>
        <span class="button"></span>
      </div>
    </div>
    <div class="body">
      <table id="coursesTable">
        <colgroup>
          <col style="width:60%;">
          <col style="width:15%;">
          <col style="width:15%;">
          <col style="width:10%;">
        </colgroup>
        <thead>
          <tr><th>Course</th><th>Credits</th><th>Grade</th><th></th></tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="controls">
        <button class="btn" id="addCourse">+ Add Course</button>
        <button class="btn settings" id="settingsBtn">‚öôÔ∏è</button>
      </div>
      <div class="gpa-display">GPA: <span id="gpaValue">0.00</span></div>
    </div>
  </div>
  <div class="modal-overlay" id="settingsModal">
    <div class="modal">
      <h2>Settings</h2>
      <label for="scaleSelect">GPA Scale:</label>
      <select id="scaleSelect">
        <option value="4.0">4.0 (Unweighted)</option>
        <option value="5.0">5.0 (Weighted AP)</option>
      </select>
      <div class="modal-buttons">
        <button class="modal-btn cancel-btn" id="cancelSettings">Cancel</button>
        <button class="modal-btn confirm-btn" id="saveSettings">Save</button>
      </div>
    </div>
  </div>
  <script>
    const baseGradePoints = { 'A':4.0,'A-':3.7,'B+':3.3,'B':3.0,'B-':2.7,'C+':2.3,'C':2.0,'C-':1.7,'D+':1.3,'D':1.0,'F':0.0 };  
    let gradePoints = {};
    let scale = parseFloat(localStorage.getItem('gpaScale')) || 4.0;

    const tableBody = document.querySelector('#coursesTable tbody');
    const gpaValue = document.getElementById('gpaValue');
    const settingsBtn = document.getElementById('settingsBtn');
    const settingsModal = document.getElementById('settingsModal');
    const scaleSelect = document.getElementById('scaleSelect');
    const saveSettings = document.getElementById('saveSettings');
    const cancelSettings = document.getElementById('cancelSettings');

    function updateMapping() {
      const factor = scale / 4.0;
      gradePoints = Object.fromEntries(
        Object.entries(baseGradePoints).map(([g, v]) => [g,(v * factor).toFixed(2)])
      );
    }
    function addRow() {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td><input placeholder="Name" /></td>
        <td><input type="number" min="0" step="0.5" value="3" /></td>
        <td>
          <select>
            ${Object.keys(baseGradePoints).map(g=>`<option>${g}</option>`)}
          </select>
        </td>
        <td><button class="btn delete-btn">üóë</button></td>
      `;
      row.querySelectorAll('input, select').forEach(el=>el.addEventListener('input', calculateGPA));
      row.querySelector('.delete-btn').onclick = () => { row.remove(); calculateGPA(); };
      tableBody.append(row);
      calculateGPA();
    }
    function calculateGPA() {
      let totalPoints=0, totalCredits=0;
      tableBody.querySelectorAll('tr').forEach(r=>{
        const c=parseFloat(r.cells[1].firstElementChild.value)||0;
        const g=r.cells[2].firstElementChild.value;
        totalPoints+=c*(gradePoints[g]||0);
        totalCredits+=c;
      });
      gpaValue.textContent=(totalCredits?totalPoints/totalCredits:0).toFixed(2);
    }
    document.getElementById('addCourse').onclick=addRow;
    settingsBtn.onclick=()=>{scaleSelect.value=scale;settingsModal.classList.add('active');};
    cancelSettings.onclick=()=>settingsModal.classList.remove('active');
    saveSettings.onclick=()=>{scale=parseFloat(scaleSelect.value);localStorage.setItem('gpaScale',scale);updateMapping();calculateGPA();settingsModal.classList.remove('active');};
    updateMapping();addRow();
  </script>
</body>
</html>

